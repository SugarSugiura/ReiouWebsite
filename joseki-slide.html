<!doctype html>
<html><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script defer="" src="https://cdn.jsdelivr.net/npm/shogi-player@1.1.0"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet" href="assets/css/reset.css">
  <link rel="stylesheet" href="assets/css/header.css">
  <link rel="stylesheet" href="assets/css/slide.css">
  <style>
    html {
      overflow: scroll;
    }
  </style>
  <script>
    var kif;
    var kif_1;
    var kif_2;


    function read_file(file) {
      const rec = new XMLHttpRequest();
      rec.open('GET', file, true); // ファイルのURLを指定
      rec.send(); // 読み込み開始
      rec.responseType = 'text'; // レスポンスタイプを指定
      // 読み込み完了時の処理
      rec.onload = function() {
        if (rec.status === 200) {
          kif = rec.responseText;
        }
      };  
    }

    window.onload = function(){
      read_file("assets/kif/aigakari_1.txt");
      setTimeout(() => {
        kif_1 = kif;
        set_first_kif();
        read_file("assets/kif/aigakari_2.txt");
        setTimeout(() => {
          kif_2 = kif;
        }, 100);
      }, 100);
      
      
        //set_first_kif();
    }

    function get_kif(kif) {
      return kif;
    }

    function set_first_kif() {
      const elem = document.getElementById("shogi");
      elem.setAttribute("source", kif_1);
    }

    
  </script>
  <!-- <script defer src="../../dist/wc/production/shogi-player-wc.js"></script> -->
  <script type="module">
    import { LitElement, css, html } from "https://cdn.jsdelivr.net/gh/lit/dist@2/core/lit-core.min.js"
    export class ShogiBoard extends LitElement {
      static styles = css`
        :host {
          display: block;
          /*border: 1px solid hsl(0 0% 0% / 0.1);*/
          padding-top: 80px;
          padding: 80px 1rem 1rem 1rem;
          height: 100%;
        }
        .container {
          display: flex;
          justify-content: center;
          gap: 1rem;
        }
        shogi-player-wc {
          flex-basis: 44%;
        }
        shogi-player-wc::part(root) {
          --sp_board_color: LightSkyBlue;
        }
        .comment {
          border: 1px solid hsl(0 0% 0% / 0.10);
          background-color: hsl(0 0% 0% / 0.02);
          border-radius: 4px;
          flex-basis: 24%;
          position: relative;
        }
        .comment-body {
          position: absolute;
          top: 1rem;
          left: 1rem;
          bottom: 1rem;
          right: 1rem;

          overflow-y: scroll;

          display: flex;
          flex-direction: column;
          gap: 1rem;
        }
        .comment-body p {
          margin: 0;
        }
        .explane {
          border: 1px solid hsl(0 0% 0% / 0.10);
          background-color: hsl(0 0% 0% / 0.02);
          border-radius: 4px;
          flex-basis: 24%;
          position: relative;
        }
        .explane-body {
          position: absolute;
          top: 1rem;
          left: 1rem;
          bottom: 1rem;
          right: 1rem;

          display: flex;
          flex-direction: column;
          gap: 1rem;
        }

        @media screen and (max-width: 991px) {
          .container {
            flex-wrap: wrap;
          }
          shogi-player-wc {
            flex-basis: auto;
            width: 50%;
          }
          .explane {
            flex-basis: auto;
            width: 40%;
          }
          .comment {
            flex-basis: auto;
            width: 40%;
            height: 200px;
          }
        }

        @media screen and (max-width: 767px) {
          .container {
            flex-direction: column;
            flex-wrap: inherit;
          }
          shogi-player-wc {
            flex-basis: content;
            width: auto;
          }
          .comment {
            order: 1;
            flex-basis: 300px;
            width: auto;
          }
          .explane {
            order: 2;
            flex-basis: 300px;
            width: auto;
          }
        }        
      `

      static properties = {
        source: { type: String },
        comment_lines: { type: Array },
        turn: { type: String },
        pass_css: { type: String },
        kif: { type: String },
        turn_max: { type: Number }
      }

      constructor() {
        super()
        this.source = ""
        this.comment_lines = null
        this.turn = null
        this.pass_css = null
        this.kif = null;
        this.turn_max = null;
      }

      firstUpdated() {
        setInterval(() => {
          //console.log(this.kif);
        }, 100)
      }

      render() {
        return html`
          <div class="container">
            <div class="explane">
              <div class="explane-body">
              </div>
            </div>
            <shogi-player-wc
              sp_mode="view"
              sp_body="${this.source}"
              sp_turn="${this.turn}"
              sp_comment="false"
              sp_mobile_vertical="false"
              @ev_comment_change="${e => this.comment_lines = e.detail[0]}"
              @ev_turn_offset_change="${e => this.change(e)}"
              @ev_turn_offset_max_change="${e => this.turn_max = e.detail[0]}"
              sp_controller="true"
              sp_debug="false"
              sp_pass_css="${this.pass_css}"
            ></shogi-player-wc>
            <div class="comment">
              <div class="comment-body">
                ${(this.comment_lines || []).map(e => html`<p>${e}</p>`)}
                <input id="change_sfen" type="button" value="第2章" @click="${this.test}">
              </div>
          </div>
        `
      }

      change(e) {
        const elem = this.shadowRoot.getElementById('change_sfen');
        if (e.detail[0] == this.turn_max) {
          elem.style.display = "inline-block";
          
        } else {
          elem.style.display = "none";
        } 
        
      }

      test() {
        this.source = kif_2;
        this.turn = "4";
      }

      
    }
    customElements.define("shogi-board", ShogiBoard);
  </script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@mdi/font/css/materialdesignicons.min.css" rel="stylesheet" id="bdf2da9503326784806e006ec9c11bcf"></head>
<body>
  <header id="header">
    <div></div>          
    <div class="header_container">
      <div class="site-title"><!--空白でclass名を2つ指定-->
        <a href="index.html"><img src="assets/img/REIOUlogo.png" alt="REIOU"></a>
      </div>
      <nav id="navi" class="pc-area"><!--元は-->
        <ul class="menu active"><!--元はmenu-->
          <li class="single">
            <a href="index.html" id="menu1" class="single_text">学習</a>
            <ul class="menu-second">
              <li><a href="index.html">戦法定跡</a></li>
              <li><a href="quiz.html">次の一手</a></li>
              <li><a href="tsume-shogi.html">詰将棋</a></li>
              <li><a href="assets/html/slide.html">YouTube動画</a></li>
            </ul>
          </li>
          <li class="single active">
            <a href="test.html" id="menu2" class="single_text">記事<!----></a>
            <ul class="menu-second">
              <li><a href="joseki-slide.html">棋戦情報</a></li>
              <li><a href="quiz.html">プロの棋譜解説</a></li>
            </ul>
          </li>
          <li class="single active">
            <a href="sousa.html" id="menu3" class="single_text">紹介<!----></a>
          </li>
          <li class="single active">
            <a href="create-tume-shogi.html" id="menu4" class="single_text">プラン<!---->
            </a>
          </li>
          <!--<li><a href="#">お問い合わせ</a></li>-->
        </ul>
            <!--<ul class="login">
                <li><a href="#">無料版</a></li>
                <li><a href="#">ログイン</a></li>
          </ul>-->
      </nav>
      <div style="flex-basis: 10%;" class="test">
        <h1>
          仮予定地
        </h1>
      </div>
    </div>
    
    
    <nav id="navi-phone" class="phone-area">
      <ul class="phone_menu_wrapper">
        <li><a href="index.html" style="border-top: 1px solid #fff;">学習</a></li>
        <li><a href="#">戦法一覧</a></li>
        <li><a href="#">紹介</a></li>
        <li><a href="#">プラン</a></li>
        <li><a href="#">お問い合わせ</a></li>
      </ul>
    </nav>
    <div class="toggle_btn">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <div id="mask"></div>
  </header>

  <input type="checkbox" id="slide_close" checked> <!--閉じるボタンのチェックボックスここに記述してよいのかはわからない-->
  <div id="slide_all" class="slideshow_wrapper">
    <div class="slideshow_container">
      <div class="slideshow">
        <input type="radio" name="slideshow" id="switch1" checked>
        <input type="radio" name="slideshow" id="switch2">
        <input type="radio" name="slideshow" id="switch3">
        <input type="radio" name="slideshow" id="switch4">
        <input type="radio" name="slideshow" id="switch5">
        <div class="slide_closeButton_container">
          <div style="position: relative; display: inline-block">
            <label class="slide_closeButton" for="slide_close">×</label>
          </div>
        </div>
        <div id="slide" class="slideContents">
          <div class="slide_bg">
            <section id="slide1_container">
              <div id="slide1" class="slide_wrapper">
                <div class="slide1_inside_areaA">
                  <h1 class="slide-title">棒銀戦法</h1>
                  <p class="description">
                    棒銀とは銀将を棒のように                          
                    まっすぐ進めて攻めることから                          
                    この名が付きました。
                    <br>
                    総じて速攻性に優れ、                    
                    1から4筋を絡めると侮れない破壊力を持ちます。                      
                    <br>
                    「覚えやすい戦法」「将棋の基本」として、                     
                    初心者の方に一番人気の高い戦法です。
                    <br>
                    プロの対局でもしばしば現れ、有名な加藤一二三九段は棒銀戦法を得意としています。
                    <br>
                    それではやっていきましょう！
                  </p>
                  <img style="display: block; margin: 0 auto 40px auto;  width: 60vw; max-width: 900px; bottom: -40px; position:relative;" src="../img/棒銀_1.png" width="50%">
                </div>
                
              </div>
            </section>
          </div>
          <div class="slide_bg">
            <section id="slide2_container">
              <div id="slide2" class="slide_wrapper">
                <div class="slide2_inside_areaA">
                  <div class="slide_headline">
                    <span>大きい見出し</span>
                  </div>
                </div>
                <div class="slide2_inside_areaB">
                  <div class="description">
                    <span>説明説明説明説明説明説明説明説明説明説明説明説明説明説明説明説明説明説</span>
                  </div>
                </div>
                <div class="slide2_inside_areaC">
                  <img src="../img/aigakariPopup.png">
                </div>
              </div>
            </section>
          </div>
          <div class="slide_bg">
            <section id="slide3_container">
              <div id="slide3" class="slide_wrapper">
                <div class="slide3_inside_areaA">
                  <div class="slide_headline">
                    <span>大きい見出し</span>
                  </div>
                </div>
                <div class="slide3_inside_areaB">
                  <div class="description">
                    <span>説明説明説明説明説明説明説明説明説明説明説明説明説明説明説明説明説明説明</span>
                  </div>
                </div>
                <div class="slide3_inside_areaC">
                  <div>
                    <img src="../img/aigakariPopup.png">
                  </div>
                  <div>
                    <img src="../img/aigakari.jpg">
                  </div>
                  <div>
                    <img src="../img/aigakariPopup.png">
                  </div>
                </div>
                <!-- <div class="slide3_inside_areaD">
                  <img src="../img/aigakari.jpg">
                </div> -->
              </div>
            </section>
          </div>
          <div class="slide_bg">
            <section id="slide4_container">
              <div id="slide4" class="slide_wrapper">
                <div class="slide4_inside_areaA">
                  <div class="slide_headline">
                    <span>ここでスライドは終わりです</span>
                  </div>
                  <div style="position:relative; z-index:10000">
                    <div style="display: inline-block">
                      <label class="slide_closeButton" for="slide_close" style="font-size: 100px;">演習に進む</label>
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </div>
          <section id="slide5">
            <img src="../../img/slide_05.png" alt="" width="600" height="400">
          </section>
        </div>
        <p id="left-arrow" class="arrow prev">
          <i class="ico"></i>
          <label for="switch1"></label>
          <label for="switch2"></label>
          <label for="switch3"></label>
          <label for="switch4"></label>
          <label for="switch5"></label>
        </p>
        <p id="right-arrow" class="arrow next">
          <i class="ico"></i>
          <label for="switch1"></label>
          <label for="switch2"></label>
          <label for="switch3"></label>
          <label for="switch4"></label>
          <label for="switch5"></label>
        </p>
      </div>
    </div>
    
  </div>
  <!-- <input type="button" value="採点" onclick="EmphasizeSquare(5, 5)" style="position: absolute; top: 100px"> -->
<shogi-board id="shogi" turn="0" source="*使用ソフトはdlshogi
1 ２六歩(27)        ( 0:00/00:00:00)
 2 ３四歩(33)        ( 0:00/00:00:00)
 3 ２五歩(26)        ( 0:00/00:00:00)
 4 ３三角(22)        ( 0:00/00:00:00)
 5 ７六歩(77)        ( 0:00/00:00:00)
 6 ４四歩(43)        ( 0:00/00:00:00)
 7 ４八銀(39)        ( 0:00/00:00:00)
 8 ３二飛(82)        ( 0:00/00:00:00)
 9 ３六歩(37)        ( 0:00/00:00:00)
10 ９四歩(93)        ( 0:00/00:00:00)
11 ９六歩(97)        ( 0:00/00:00:00)
12 ６二玉(51)        ( 0:00/00:00:00)
13 ６八玉(59)        ( 0:00/00:00:00)
14 ４二銀(31)        ( 0:00/00:00:00)
15 ７八玉(68)        ( 0:00/00:00:00)
16 ７二銀(71)        ( 0:00/00:00:00)
17 ５八金(49)        ( 0:00/00:00:00)
18 ７一玉(62)        ( 0:00/00:00:00)
19 ４六歩(47)        ( 0:00/00:00:00)
20 ５二金(41)        ( 0:00/00:00:00)
21 ３七桂(29)        ( 0:00/00:00:00)
22 ８二玉(71)        ( 0:00/00:00:00)
23 ４五歩(46)        ( 0:00/00:00:00)
*テーマ図:+400
*
*この局面での振り飛車側の応手としては、45同歩か35歩が考えられる。
*結論としては、
*35歩
* →最善手順を尽くして先手+800
*45同歩
* →最善手順を尽くして先手+1000
*
*
*
*
24 同 歩(44)        ( 0:00/00:00:00)
25 ２四歩(25)        ( 0:00/00:00:00)
26 同 歩(23)        ( 0:00/00:00:00)
27 ３三角成(88)       ( 0:00/00:00:00)
28 同 銀(42)        ( 0:00/00:00:00)
29 ４五桂(37)        ( 0:00/00:00:00)
*ここでは22銀か44銀が考えられるが、44銀と上がらせることができれば基本的に居飛車の攻めが成功した形となる。
*※部分図で紹介してもいいか
*
30 ２二銀(33)        ( 0:00/00:00:00)
31 ６六角打           ( 0:00/00:00:00)
*角の打ち場所は66と88がおすすめ.。
*66は端に利かしているため駒を持った際に攻めやすい。
*88角は角がいじめられにくい。
*
*Sugar的には将来的に角がいじめられる展開は少なめな印象であるため、66角がおすすめ。
*角交換のような展開も多いためあまり気にせず好きなほうに打つとよい。
32 ４二飛(32)        ( 0:00/00:00:00)
33 ２四飛(28)        ( 0:00/00:00:00)
34 ２三歩打           ( 0:00/00:00:00)
35 ３四飛(24)        ( 0:00/00:00:00)
*ここでは28角と33歩が考えられるが、28角は長すぎるため(先手優勢にはなる)33歩の紹介だけでいいか
36 ３三歩打           ( 0:00/00:00:00)
37 ４四飛(34)        ( 0:00/00:00:00)
38 同　飛(42)        ( 0:00/00:00:00)
39 同　角(66)        ( 0:00/00:00:00)
40 ４三飛打           ( 0:00/00:00:00)
41 ５三角成(44)       ( 0:00/00:00:00)
*45飛は54馬で飛車桂両取りがかかる。41飛には32馬、25飛にも21馬で銀が助からず優勢となる。
42 同　金(52)        ( 0:00/00:00:00)
43 同　桂成(45)       ( 0:00/00:00:00)
44 同　飛(43)        ( 0:00/00:00:00)
45 ３二飛打           ( 0:00/00:00:00)
46 ５二飛(53)        ( 0:00/00:00:00)
47 ４二金打           ( 0:00/00:00:00)
*ここまでくれば飛車を逃げれば22飛成、同飛同飛成31金も45龍から42歩の垂れ歩くらいで居飛車優勢
*+800
"></shogi-board>

<script src="assets/js/test.js"></script>
</body></html>